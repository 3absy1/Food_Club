<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <title>Login and Signup</title>
  <link rel="stylesheet" href="./style.css">
  
 <link rel="stylesheet" href="build/css/intlTelInput.css">
 <link rel="icon" type="image/png" sizes="32x32" href="images/274506004_436002001581432_7956343886707801994_n.jpg">


</head>
<body>
	
  

<!-- partial:index.partial.html -->
<div id="container" class="container">

		<!-- FORM SECTION -->
		<div class="row">
			<!-- SIGN UP -->
			<div class="col align-items-center flex-col sign-up">
				<div class="form-wrapper align-items-center">
					<div class="form sign-up">
						<div class="input-group">
							<i class='bx bxs-user'></i>
							<input type="text" placeholder="Username"id="username" name="username">
						</div>
						<div class="input-group">
							<i class='bx bx-mail-send'></i>
							<input type="email" placeholder="Email"id="email" name="email">
							<br><br>
							<input type="text" placeholder="Address"id="address" name="address">

						</div>
						<div class="input-group">
							<i class='bx bxs-lock-alt'></i>
							<input type="password" placeholder="Password" id="password" name="password">
						</div>
						<div class="input-group">
							<i class='bx bxs-lock-alt'></i>
							<input type="password"  placeholder="Confirm password"id="confirmpassword" name="confirmpassword">
						</div>
						<div class="input-group">
							<i class='bx bxs-lock-alt'></i>
							<input type="date" id="birthday" name="birthday"placeholder="Date Of Birth">
							
						</div>
						<div class="input-group">
							<i class='bx bxs-lock-alt'></i>
							<form>
							<input id="phone" name="phone" type="tel">
						</form>
							
						</div>
						<button type="submit" id="signUp" name="signup">
							Sign up
						</button>
						
							<span>
								Already have an account?
							</span>
							<b onclick="toggle()" class="pointer">
								Sign in here
							</b>
						</p>
					</div>
				</div>
			
			</div>
			<!-- END SIGN UP -->
			<!-- SIGN IN -->
			
			<div class="col align-items-center flex-col sign-in">
				<a id="whit" href="F:/Foooody%23@/FOOD%20CLUB%20(arabic)/FOO0DY%23%20%20with%20out%20login/index3.html">Arabic</a>

				<div class="form-wrapper align-items-center">
					<!-- <form method="get" action="display.html"> -->
					<div class="form sign-in">					
						<div class="input-group">
							<i class='bx bxs-user'></i>
							<input type="text" id="emaill" placeholder="Email" name="emaill">
						</div>				
						<div class="input-group">
							<i class='bx bxs-lock-alt'></i>
							<input type="password" id="passwordd" placeholder="Password" name="passwordd">
						</div>
						<!--<a href="E:/Foooody%23/FOO0DY%23/index1.html">-->
							<button type="submit" id="signIn" name="signin" onclick="getdata()" >Sign in</button>
						
					
						
						<p>
							<span>
								Don't have an account?
							</span>
							<b onclick="toggle()" class="pointer">
								Sign up here
							</b>
						</p>
						
					</div>
				<!-- </form> -->
				
					
				</div>
				<!--<button onclick="signOut()" id="signOut">Sign out</button>-->
				


				<br>
				<br>
				<h2 id="sign"> OR </h2>
				<div id="signin">
					 <button id="facebook"><a id="linky" href="index4.html">  as guest </a><br></button>
					 <br>
					 <br>
					 <button id="facebook"><a id="linky" href="F:/Foooody%23@/FOO0DY%23%20%20with%20out%20login/simple-login-page-in-html%20(1)/simple-login-page-in-html/index.html"> Login as Restaurant </a></button>
				<!-- <a id="google" href="#"><img id="google" src="images/goog.png" alt="images"></a> -->
			    </div>
				<div class="form-wrapper">
		
				</div>
			</div>
			<!-- END SIGN IN -->
		</div>
		<!-- END FORM SECTION -->
		<!-- CONTENT SECTION -->
		<div class="row content-row">

			<!-- SIGN IN CONTENT -->
			<div class="col align-items-center flex-col">
				<div class="text sign-in">
					<h2>
						Welcome
					</h2>
	
				</div>
				<div class="img sign-in">
		
				</div>
			</div>
			<!-- END SIGN IN CONTENT -->
			<!-- SIGN UP CONTENT -->
			<div class="col align-items-center flex-col">
				<div class="img sign-up">
				
				</div>
				<div class="text sign-up">
					<h2>
						Join with us
					</h2>
	
				</div>
			</div>
			<!-- END SIGN UP CONTENT -->
		</div>
		<!-- END CONTENT SECTION -->
	</div>
<!-- partial -->
<script>
	function getdata(){
	var fastname=document.getElementById("emaill").value;
	localStorage.setItem("textvalue",fastname);
	return false;
  }
//   function send(){
// 	var fastname=document.getElementById("email").value;
// 	localStorage.setItem("textvalue",fastname);
// 	return false;
//   }
</script>
  <script  src="./script.js"></script>
  <script src="build/js/intlTelInput.js"></script>
  <script>
    var input = document.querySelector("#phone");
    window.intlTelInput(input, {
      // allowDropdown: false,
      // autoHideDialCode: false,
      // autoPlaceholder: "off",
      // dropdownContainer: document.body,
      // excludeCountries: ["us"],
      // formatOnDisplay: false,
      // geoIpLookup: function(callback) {
      //   $.get("http://ipinfo.io", function() {}, "jsonp").always(function(resp) {
      //     var countryCode = (resp && resp.country) ? resp.country : "";
      //     callback(countryCode);
      //   });
      // },
      // hiddenInput: "full_number",
      // initialCountry: "auto",
      // localizedCountries: { 'de': 'Deutschland' },
      // nationalMode: false,
      // onlyCountries: ['us', 'gb', 'ch', 'ca', 'do'],
      // placeholderNumberType: "MOBILE",
      // preferredCountries: ['cn', 'jp'],
      // separateDialCode: true,
      utilsScript: "build/js/utils.js",
    });
  </script>

</body>
<script type="module">
	// Import the functions you need from the SDKs you need
	import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js";
	import { getDatabase ,set ,ref,update} from "https://www.gstatic.com/firebasejs/9.6.10/firebase-database.js";
	import { getAuth, createUserWithEmailAndPassword,signInWithEmailAndPassword ,onAuthStateChanged  } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-auth.js";


	// TODO: Add SDKs for Firebase products that you want to use
	// https://firebase.google.com/docs/web/setup#available-libraries
  
	// Your web app's Firebase configuration
	
	const firebaseConfig = {
	  apiKey: "AIzaSyCDajRe6q98Of6b7sNcKbpMU-88ube3gcg",
	  authDomain: "finalproject-93617.firebaseapp.com",
	  databaseURL: "https://finalproject-93617-default-rtdb.firebaseio.com",
	  projectId: "finalproject-93617",
	  storageBucket: "finalproject-93617.appspot.com",
	  messagingSenderId: "429854078677",
	  appId: "1:429854078677:web:3b8bd691663d9e918b945c"
	};
  
	// Initialize Firebase
	const app = initializeApp(firebaseConfig);
	const database = getDatabase(app);
	const auth = getAuth();
	localStorage.removeItem("mealname");

	signUp.addEventListener('click',(e) =>{
		// Generate a number between 0 and 10, including 10
function generateRandomInteger(max) {
    return Math.floor(Math.random() * max) + 1;
}

let value1 = generateRandomInteger(1000);
     var email = document.getElementById('email').value;
     var password = document.getElementById('password').value;
     var username= document.getElementById('username').value;
     var confirmpassword= document.getElementById('confirmpassword').value;
     var birthday= document.getElementById('birthday').value;
     var phone= document.getElementById('phone').value; 
	 var address= document.getElementById('address').value; 

	 

	 if(valdition_field(username)==false||valdition_field(birthday)==false||valdition_field(phone)==false||valdition_field(confirmpassword)==false){
      alert('one or more fields is Outta Line')
      return
     }
	//  else if(valdition_email(email)==false || valdition_password(password)==false){
    //   alert('Email and Password is Outta Line')
    //   return
    //   //don't run the code 

    // }
	else if(password!=confirmpassword){
		alert('password not the same')
		return
	}
	 else{

	createUserWithEmailAndPassword(auth, email, password)
  .then((userCredential) => {
    // Signed up 
    const user = userCredential.user;
	set(ref(database, 'users/' + user.uid),{
		id:value1,
		username: username,
		email:email,
		address:address,
		password:password,
		confirmpassword:confirmpassword,
		birthday:birthday,
		phone: phone,


	})
	alert('user created! go back to signin page');
	// location.href="F:/Foooody%23@/FOO0DY%23/index1.html";
    // ...
  })
  .catch((error) => {
    const errorCode = error.code;
    const errorMessage = error.message;
	alert(errorMessage);
    // ..
  });
}
	});

	//**************************************************************

	//sign in *******************************************************

	signIn.addEventListener('click',(e) =>{
     var emaill = document.getElementById('emaill').value;
     var passwordd = document.getElementById('passwordd').value;


	 signInWithEmailAndPassword(auth, emaill, passwordd)
  .then((userCredential) => {
    // Signed in 
    const user = userCredential.user;
    localStorage.setItem("useridd",user.uid);
	const dt=new Date();
	update(ref(database, 'users/' + user.uid),{
	last_login: dt,
})

	alert('User Login Successful')
    location.href="F:/Foooody%23@/FOO0DY%23/index1.html";


    // ...
  })
  .catch((error) => {
    const errorCode = error.code;
    const errorMessage = error.message;
	alert(errorMessage);
    // ..
  });
	});
	onAuthStateChanged(auth, (user) => {
  if (user) {
    // User is signed in, see docs for a list of available properties
    // https://firebase.google.com/docs/reference/js/firebase.User
    const uid = user.uid;
    // ...
  } else {
    // User is signed out
    // ...
  }
});

	 //valdition
	 function valdition_email(email){
   expression= /^[^@]+@\w+(\.\w+)+\w$/;
   if(expression.test(email) == true){
     return true
   }else{
     return false
   }
  }
  function valdition_password(password){
    if (password<=8){
      return false
    }else{
      return true
    }
  }
  function valdition_field(filed){
    if(filed==null){
      return false
    }
    if(filed<=0){
      return false
    }else{
      return true
    }
  }


  </script>
</html>
