<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Required meta tags-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Colorlib Templates">
    <meta name="author" content="Colorlib">
    <meta name="keywords" content="Colorlib Templates">

    <!-- Title Page-->
    <title>Restaurant Registration</title>

    <!-- Icons font CSS-->
    <link href="vendor/mdi-font/css/material-design-iconic-font.min.css" rel="stylesheet" media="all">
    <link href="vendor/font-awesome-4.7/css/font-awesome.min.css" rel="stylesheet" media="all">
    <!-- Font special for pages-->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i,800,800i" rel="stylesheet">

    <!-- Vendor CSS-->
    <link href="vendor/select2/select2.min.css" rel="stylesheet" media="all">
    <link href="vendor/datepicker/daterangepicker.css" rel="stylesheet" media="all">

    <!-- Main CSS-->
    <link href="css/main.css" rel="stylesheet" media="all">
    <link rel="icon" type="image/png" sizes="32x32" href="images/274506004_436002001581432_7956343886707801994_n.jpg">

</head>

<body>
    <div class="page-wrapper bg-gra-03 p-t-45 p-b-50">
        <div class="wrapper wrapper--w790">
            <div class="card card-5">
                <div class="card-heading">
                    <h2 class="title">تسجيل المطعم</h2>
                </div>
                <div class="card-body">
                    <form method="POST">
                        <div class="form-row m-b-55">
                            <div class="name">اسم المطعم/الفئة</div>
                            <div class="value">
                                <div class="row row-space">
                                    <div class="col-2">
                                        <div class="input-group-desc">
                                            <input class="input--style-5" type="text" name="first_name" id="fullname">
                                            <label class="label--desc">الاسم</label>
                                        </div>
                                    </div>
                                    <div class="col-2">
                                        <div class="input-group-desc">
                                            <input class="input--style-5" type="text" name="last_name" id="category">
                                            <label class="label--desc">الفئة</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="name">العنوان</div>
                            <div class="value">
                                <div class="input-group">
                                    <input class="input--style-5" type="text" name="company" id="direction">
                                </div>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="name">البريد الالكتروني</div>
                            <div class="value">
                                <div class="input-group">
                                    <input class="input--style-5" type="email" name="email" id="email">
                                </div>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="name">كلمة السر</div>
                            <div class="value">
                                <div class="input-group">
                                    <input class="input--style-5" type="password"  id="password">
                                </div>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="name">تأكيد كلمة السر</div>
                            <div class="value">
                                <div class="input-group">
                                    <input class="input--style-5" type="password"  id="comfirmpassword">
                                </div>
                            </div>
                        </div>
                        <div class="form-row m-b-55">
                            <div class="name">الهاتف</div>
                            <div class="value">
                                <div class="row row-refine">
                                    <div class="col-3">
                                        <div class="input-group-desc">
                                            <input class="input--style-5" type="text" name="area_code" id="areaphone">
                                            <label class="label--desc">رمز المنطقة</div>
                                    </div>
                                    <div class="col-9">
                                        <div class="input-group-desc">
                                            <input class="input--style-5" type="text" name="phone" id="phone">
                                            <label class="label--desc"> الموبايل</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                       
                        <div>
                           <!-- <a href="RESADMIN/pages/product/addproduct.html"></a>-->
                                
                        </div>
                    </form>
                    <button class="btn btn--radius-2 btn--red" type="submit" id="register" >تسجيل</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Jquery JS-->
    <script src="vendor/jquery/jquery.min.js"></script>
    <!-- Vendor JS-->
    <script src="vendor/select2/select2.min.js"></script>
    <script src="vendor/datepicker/moment.min.js"></script>
    <script src="vendor/datepicker/daterangepicker.js"></script>

    <!-- Main JS-->
    <script src="js/global.js"></script>

</body>
<script type="module">
	// Import the functions you need from the SDKs you need
	import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js";
	import { getDatabase ,set ,ref} from "https://www.gstatic.com/firebasejs/9.6.10/firebase-database.js";
	import { getAuth, createUserWithEmailAndPassword  } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-auth.js";


	// TODO: Add SDKs for Firebase products that you want to use
	// https://firebase.google.com/docs/web/setup#available-libraries
  
	// Your web app's Firebase configuration
	const firebaseConfig = {
	  apiKey: "AIzaSyCDajRe6q98Of6b7sNcKbpMU-88ube3gcg",
	  authDomain: "finalproject-93617.firebaseapp.com",
	  databaseURL: "https://finalproject-93617-default-rtdb.firebaseio.com",
	  projectId: "finalproject-93617",
	  storageBucket: "finalproject-93617.appspot.com",
	  messagingSenderId: "429854078677",
	  appId: "1:429854078677:web:3b8bd691663d9e918b945c"
	};
  
	// Initialize Firebase
	const app = initializeApp(firebaseConfig);
	const database = getDatabase(app);
	const auth = getAuth();

	register.addEventListener('click',(e) =>{
    var email = document.getElementById('email').value;
    var password = document.getElementById('password').value;
    var fullname= document.getElementById('fullname').value;
    var comfirmpassword= document.getElementById('comfirmpassword').value;
    var areaphone= document.getElementById('areaphone').value;
    var phone= document.getElementById('phone').value; 
    var direction= document.getElementById('direction').value; 
    var category= document.getElementById('category').value; 

    if(valdition_field(fullname)==false||valdition_field(areaphone)==false||valdition_field(phone)==false||valdition_field(direction)==false||valdition_field(category)==false ){
      alert('one or more fields is Outta Line')
      return
     }
	//  else if(valdition_email(email)==false || valdition_password(password)==false){
    //   alert('Email and Password is Outta Line')
    //   return
    //   //don't run the code 

    // }
	else if(password!=comfirmpassword){
		alert('password not the same')
		return
	}
	 else{

	createUserWithEmailAndPassword(auth, email, password)
  .then((userCredential) => {
    // Signed up 
    const user = userCredential.user;
	set(ref(database, 'restaurant/' + user.uid),{
		fullname: fullname,
		email:email,
		password:password,
		comfirmpassword:comfirmpassword,
		direction:direction,
		phone: phone,
        category:category,

	})
	alert('Send Requst Please Wait...!');
	//window.location.href="F:/Foooody%23/FOO0DY%23/index1.html";
    // ...
  })
  .catch((error) => {
    const errorCode = error.code;
    const errorMessage = error.message;
	alert(errorMessage);
    // ..
  });
}
	});



	 //valdition
	 function valdition_email(email){
   expression= /^[^@]+@\w+(\.\w+)+\w$/;
   if(expression.test(email) == true){
     return true
   }else{
     return false
   }
  }
  function valdition_password(password){
    if (password<=8){
      return false
    }else{
      return true
    }
  }
  function valdition_field(filed){
    if(filed==null){
      return false
    }
    if(filed<=0){
      return false
    }else{
      return true
    }
  }

  </script>

</html>
<!-- end document-->